# Passage

**Safe passage for your messages beyond Mac.**

Passage is a web-based Messages app proxy that runs on your Mac and provides access to iMessage and SMS through a browser. Access your messages from your Linux desktop, TV, or any device with a web browser.

## Quick Start

```bash
# Clone and install
git clone https://github.com/ChrisEdgington/passage.git
cd passage
pnpm install

# Build and run (unified single-server deployment)
pnpm build:unified
pnpm start
```

Open `http://YOUR_MAC_IP:3000` in any browser on your network.

## Requirements

Before running Passage:

1. **macOS** with Messages.app signed into iCloud
2. **Full Disk Access** for your terminal app:
   - System Settings > Privacy & Security > Full Disk Access
   - Add Terminal.app, iTerm2, or whichever terminal you use
3. **Node.js 18+** and **pnpm**

## Features

- Real-time message sync via WebSocket
- iMessage and SMS support (blue and green bubbles)
- Send photos
- Vim-style keyboard navigation (j/k, gg/G, i to compose)
- Dark mode (follows system preference)
- Large touch targets for TV/tablet use

## Development

```bash
# Run frontend and backend in parallel with hot reload
pnpm dev

# Backend: http://localhost:3000
# Frontend: http://localhost:5173
```

## Architecture

Passage is a monorepo with three packages:

```
apps/
  passage-backend/    # Express + WebSocket server
  passage-frontend/   # React + MobX SPA
  landing/           # Static landing page for hosting
packages/
  shared-types/      # Shared TypeScript types
```

The backend reads directly from `~/Library/Messages/chat.db` (readonly) and uses AppleScript to send messages through Messages.app.

## Deployment Options

### Unified (Recommended)

Build everything into a single server:

```bash
pnpm build:unified
pnpm start
```

This bundles the frontend into the backend, so everything runs on port 3000.

### Separate (Development)

Run frontend and backend separately:

```bash
pnpm dev
```

## Security

- ‚ö†Ô∏è **No authentication** - Anyone on your local network can access messages
- üîí **Local network only** - Not designed for internet exposure
- üõ°Ô∏è **Read-only database** - Opens Messages DB in readonly mode to prevent corruption
- üì± **Messages.app required** - Must be running to send messages

## Troubleshooting

### "Failed to open database"
- Ensure Full Disk Access is granted to your terminal app
- Check that Messages.app is signed into iCloud
- Verify the database path in `.env`

### "Failed to send message"
- Ensure Messages.app is running
- Check that AppleScript has permissions
- Verify the recipient's phone number or email is correct

### WebSocket disconnects
- Check firewall settings
- Ensure backend server is running
- Verify WebSocket URL in frontend `.env`

## Built with AI

This project was built entirely through LLM-first development - 100% of the code was generated by prompting Claude (Opus 4.5) using [Claude Code](https://claude.ai/code). No code was written by hand.

This represents a new way of building software where the developer acts as architect and reviewer, guiding the AI through iterative prompts while the AI handles implementation details.

## License

MIT - see [LICENSE](LICENSE) for details.

## Contributing

Contributions are welcome! Please open an issue first to discuss what you would like to change.
